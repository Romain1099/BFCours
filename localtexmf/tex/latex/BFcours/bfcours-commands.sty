% Nom du fichier : bfcours-commands.sty
\ProvidesPackage{bfcours-commands}[2024/06/29 v1.0 Macros pour bfcours]



 \newcommand{\pascalc}{\textbf{Calculatrice interdite}}
\newcommand\degree{\degres}

% Définition des commandes et styles
\setlength{\parindent}{0mm}
\renewcommand{\arraystretch}{1.5}
\setlength{\fboxsep}{3mm}
\setlength{\headheight}{14.5pt}
\setlength{\premulticols}{0pt}

\newcounter{ExoMA}
\newlength{\parindentMA}%
\setlength{\parindentMA}{\parindent}
\addtolength{\parindentMA}{30pt}
\newcounter{pagecounter}
\setcounter{pagecounter}{0}

% Définition des thèmes et environnements
% (Ajoutez ici les définitions de vos thèmes et environnements)
\newcolumntype{C}[1]{>{\centering\arraybackslash}m{#1}}

\def\points{1} %Pour indiquer les points dans les exos


\newcounter{tikzfigcounter}
\setcounter{tikzfigcounter}{0}


\newcounter{profseyescounter}
\setcounter{profseyescounter}{0}

\newcommand{\masquerSiProf}[1]{%
  \ifnum\value{profseyescounter}=0%
    \phantom{#1}%
  \else%
    #1%
  \fi%
}

\newlength{\myboxwidth}
\newlength{\myboxheight}

\newcommand{\seyesCMD}[6]{%
  \settowidth{\myboxwidth}{\huge{#6}}%
  \settoheight{\myboxheight}{#1em}%
  \pgfmathsetmacro{\totalheight}{#1 * 3 * #3}%
  \begin{tcolorbox}[%
    enhanced,%
    nobeforeafter,%
    height=5 pt,%
    capture=hbox,%
    baseline={\the\dimexpr-\dp\strutbox+\ht\strutbox\relax},%
    hbox,%
    breakable,%
    left=0pt,%
    right=0pt,%
    top=2pt,%
    bottom=1pt,%
    opacityback=0,
    colback=transparent!0,% Rend le fond transparent
    colframe=white,%
    rounded corners,%
    boxrule=0pt,%
    %drop shadow,%
    before upper={%
      \begin{minipage}{\myboxwidth}%
        %\pgfmathsetmacro{\linespreadfactor}{1 + 2 / #3}%
        %\linespread{\linespreadfactor}\selectfont%
        \tikz[overlay,remember picture] \coordinate (start);%
        \phantom{\large{#6} } %si problemes mettre \phantom{\large{#6} }
      \end{minipage}%
    },%
    after upper={%
      \tikz[overlay,remember picture] \coordinate (end);%
    },%
    overlay={%
      \begin{tikzpicture}[overlay, remember picture]%
        \coordinate (A) at ([xshift=\myboxwidth]start);%
        \coordinate (B) at ([xshift=\myboxwidth]end);%
        \foreach \i in {1,...,#1} {%
          \pgfmathsetmacro{\height}{\i * 3 * 1.9mm}%
          \draw[blue!50, thin] ([xshift=#5, yshift=#2mm-\height]start) -- ([xshift=#5-0.07cm, yshift=#2mm-\height]A);%
	  \draw[gray!50, ultra thin] ([xshift=#5, yshift=#2mm-\height+#3]start) -- ([xshift=#5-0.07cm, yshift=#2mm-\height+#3]A);%
          \draw[gray!50, ultra thin] ([xshift=#5, yshift=#2mm-\height+3*#3]start) -- ([xshift=#5-0.07cm, yshift=#2mm-\height+3*#3]A);%
          %\draw[gray!50, ultra thin] ([xshift=#5, yshift=#2mm-\height-#3]start) -- ([xshift=#5-0.07cm, yshift=#2mm-\height-#3]A);%
          \draw[gray!50, ultra thin] ([xshift=#5, yshift=#2mm-\height+2*#3]start) -- ([xshift=#5-0.07cm, yshift=#2mm-\height+2*#3]A);%
          %\draw[blue!50, ultra thin] ([xshift=#5, yshift=#2mm-\height+4*#3]start) -- ([xshift=#5-0.07cm, yshift=#2mm-\height+4*#3]A);%
        }%
      \end{tikzpicture}%
    }%
  ]%
\noindent  \hspace{-\myboxwidth} \large{#6}
  \end{tcolorbox}%
}
\newcommand{\seyesFrac}[6]{%
  \settowidth{\myboxwidth}{\large{#6}}%
  \settoheight{\myboxheight}{#1em}%
  \pgfmathsetmacro{\totalheight}{#1 * 3 * #3}%
  \begin{tcolorbox}[%
    enhanced,%
    nobeforeafter,%
    height=7 pt,% Modifie la hauteur du texte dans la box
    capture=hbox,%
    baseline={\the\dimexpr-\dp\strutbox+\ht\strutbox\relax},%
    hbox,%
    breakable,%
    left=0pt,%
    right=0pt,%
    top=-4.5pt,%
    bottom=10pt,%
    opacityback=0,
    colback=transparent!0,% Rend le fond transparent
    colframe=white,%
    rounded corners,%
    boxrule=0pt,%
    %drop shadow,%
    before upper={%
      \begin{minipage}{\myboxwidth}%
        %\pgfmathsetmacro{\linespreadfactor}{1 + 2 / #3}%
        %\linespread{\linespreadfactor}\selectfont% MODIFIE POUR TETS, A REMETTRE AVC LIGNE DU DESSUS POUR LES FRACTIONS SEYES
        \tikz[overlay,remember picture] \coordinate (start);%
        \phantom{\large{#6} } %si problemes mettre \phantom{\large{#6} }
      \end{minipage}%
    },%
    after upper={%
      \tikz[overlay,remember picture] \coordinate (end);%
    },%
    overlay={%
      \begin{tikzpicture}[overlay, remember picture]%
        \coordinate (A) at ([xshift=1.2\myboxwidth]start);%
        \coordinate (B) at ([xshift=1.2\myboxwidth]end);%
        \foreach \i in {1,...,#1} {%
          \pgfmathsetmacro{\height}{\i * 3 * 1.9mm}%
          \draw[blue!50, thin] ([xshift=#5, yshift=#2mm-\height]start) -- ([xshift=#5-0.07cm, yshift=#2mm-\height]A);%
	  \draw[gray!50, ultra thin] ([xshift=#5, yshift=#2mm-\height+#3]start) -- ([xshift=#5-0.07cm, yshift=#2mm-\height+#3]A);%
          \draw[gray!50, ultra thin] ([xshift=#5, yshift=#2mm-\height+3*#3]start) -- ([xshift=#5-0.07cm, yshift=#2mm-\height+3*#3]A);%
          \draw[gray!50, ultra thin] ([xshift=#5, yshift=#2mm-\height-#3]start) -- ([xshift=#5-0.07cm, yshift=#2mm-\height-#3]A);%
          \draw[gray!50, ultra thin] ([xshift=#5, yshift=#2mm-\height+2*#3]start) -- ([xshift=#5-0.07cm, yshift=#2mm-\height+2*#3]A);%
          \draw[blue!50, ultra thin] ([xshift=#5, yshift=#2mm-\height+4*#3]start) -- ([xshift=#5-0.07cm, yshift=#2mm-\height+4*#3]A);%
          \draw[gray!50, ultra thin] ([xshift=#5, yshift=#2mm-\height-2*#3]start) -- ([xshift=#5-0.07cm, yshift=#2mm-\height-2*#3]A);%
        }%
      \end{tikzpicture}%
    }%
  ]%
\hspace{-1.1\myboxwidth}\large{#6}% Ancien : \noindent  \hspace{-1.5\myboxwidth} \large{#6}
  \end{tcolorbox}%
}

\newcommand{\score}[1][\hspace{0.4cm}]{\hfill \textbf{Score : \huge{\phantom{A}}\hspace{0.5cm} /} \Large{#1  }\hfill\phantom{a}}
\newcommand{\scoreRD}[1][]{\tccrep[seyes=false]{1.2cm}{}{\Large /} \large{\num{\points}}}
\newcommand{\mysquare}{
    \tcbox[sharp corners, nobeforeafter, colback=white, colframe=black, size=small, boxsep=0pt, left=4pt, right=4pt, top=4pt, bottom=4pt, halign=center, valign=center, boxrule=1.5pt]{}
}

\makeatletter
\newcommand{\tableaucolorfract}[7]{
    \@ifundefined{c@colored}{\newcounter{colored}}{}
    \begin{multicols}{2}
	\begin{spacing}{1.5}
    \noindent \textbf{Consigne :} \\ Colorier en vert la fraction du quadrillage ci-contre correspondant à la fraction : $\frac{#5}{#6}$\\
    \ifx\relax#7\relax
        \textbf{Explication :} \\ Puisqu'il y a $#1 \times #2$ carreaux et qu'on en veut les $\frac{#5}{#6}$, il suffit de colorier \\
	$\pgfmathtruncatemacro{\numtoexplain}{ #1*#2 }\numtoexplain{} 
	 \times  #5  \div  #6 = $
        \pgfmathtruncatemacro{\numtocolor}{#1*#2*#5/#6}\numtocolor{} carreaux.
    \fi
	\end{spacing}
    \columnbreak
    \begin{tikzpicture}
        \pgfmathtruncatemacro{\numtocolor}{#1*#2*#5/#6}
        \setcounter{colored}{0}
        \foreach \i in {0,...,\numexpr#1-1\relax} {
            \foreach \j in {0,...,\numexpr#2-1\relax} {
                \ifx\relax#7\relax
                    \ifnum \value{colored} < \numtocolor
                        \fill[green] (\i*#3,\j*#3) rectangle ++(#3,#3);
                        \addtocounter{colored}{1}
                    \fi
                \fi
                \draw[#4, ultra thin] (\i*#3,\j*#3) rectangle ++(#3,#3);
            }
        }
    \end{tikzpicture}
    \end{multicols}
	\hrule
}
\makeatother

\newcommand{\repegal}[1]{%
  \pgfmathtruncatemacro{\numlines}{#1 - 1}
 \ifnum\numlines>0 % Si \numlines est supérieur à 0
    \foreach \n in {1,...,\numlines} {%
      \noindent = \dotfills \\ \ \\
    }%
  \fi
  = \dotfills % Cette ligne sera toujours exécutée
}

\newcommand{\repModa}[3]{%
  \pgfmathtruncatemacro{\numlines}{#1 - 1} % Calcul de #1 - 1
  \noindent \\ \textbf{#2} % Affiche le préambule
  \ifnum\numlines>0 % Si \numlines est supérieur à 0
    \foreach \n in {1,...,\numlines} {%
      \noindent  #3 \dotfills \\ \ \\
    }%
  \fi
   #3 %\dotfills % Cette ligne sera toujours exécutée
}
\newcommand{\repModaAuto}[5]{%
   \boxrepHead{#1}{#2}{#3}{#5}{#4}
    }
\newcommand{\repModaSimple}[2]{%
\repModaAuto{1}{#2}{#1}{1}{1}
}
%utilisation : \repModa{1}{Décomposition}{:} ou encore \repModa{3}{Décomposer puis simplifier}{}
\newcommand{\repModaLC}[3]{%
  \pgfmathtruncatemacro{\numlines}{#1 - 1} % Calcul de #1 - 1
  \noindent \\ #2 % Affiche le préambule
  \ifnum\numlines>0 % Si \numlines est supérieur à 0
    \foreach \n in {1,...,\numlines} {%
      \noindent  #3 \dotfill \\ \ \\.
    }%
  \fi
   #3 \dotfill % Cette ligne sera toujours exécutée
}
\newcommand{\emptySquare}{%
  \tikz{%
    \draw[black, line width=1pt, drop shadow={shadow xshift=0.08em, shadow yshift=-0.08em, fill=gray!70}] (0,0) rectangle (0.25,0.25);
  }%
}
\newcommand{\repModaDoubleCheck}[3]{%
  % Affiche les options à cocher
  \noindent \qquad \emptySquare{} #1 \vrule \quad \emptySquare{} #2 \\ 
  % Affiche "Justification :"
  \noindent Justification : #3 
}
\newcommand{\repModaDoubleOptions}[4]{%
  % Affiche les options à cocher
  \noindent \qquad \emptySquare{} #1 \vrule \quad \emptySquare{} #2 \\ \ \\
  % Affiche "Justification :"
  \noindent #3 
  % Calcul du nombre de lignes de pointillés
  \pgfmathtruncatemacro{\numlines}{#4 - 1}
  % Affiche les lignes de pointillés
  \ifnum\numlines>0
    \foreach \n in {1,...,\numlines} {%
      \noindent \dotfills \dotfill \\ \ \\
    }%
	\dotfills
  \fi
  \noindent \dotfill % Cette ligne sera toujours exécutée
}
 \newcounter{linecounter}
\newcommand{\repModaLignes}[3]{%
  \setcounter{linecounter}{0}
  \pgfmathtruncatemacro{\numlines}{#1 - 1} % Calcul de #1 - 1
  \noindent #2 % Affiche le préambule
  \ifnum\numlines>0 % Si \numlines est supérieur à 0
    \foreach \n in {1,...,\numlines} {%
     \addtocounter{linecounter}{1}
      \noindent  (l.\arabic{linecounter}) #3 \dotfills \\ \ \\
    }%
  \fi
   (l.\arabic{linecounter}) #3 \dotfills % Cette ligne sera toujours exécutée
}

\newcommand{\oldtableaucompetence}[1]{
Je m'auto-évalue \textbf{avant} de commencer la fiche d'exercices, puis \textbf{à la fin} de la fiche d'exercices : 
    \begin{table}[h]
        \begin{tabular}{|>{\raggedright\arraybackslash}p{0.7\textwidth}|*{4}{>{\centering\arraybackslash}p{0.05\textwidth}|}}
            \hline
            \centering\textbf{Compétences travaillées} & \textbf{MI} & \textbf{MF} & \textbf{MS} & \textbf{TBM} \\
            \hline
            #1
        \end{tabular}
    \end{table}
    \hrule
}
\newcommand{\tableaucompetenceEval}[1]{
        \begin{tcbtab}{|>{\raggedright\arraybackslash}p{0.62\textwidth}|>{\centering\arraybackslash}p{0.05\textwidth}|>{\centering\arraybackslash}p{0.06\textwidth}|>{\centering\arraybackslash}p{0.06\textwidth}|>{\centering\arraybackslash}p{0.09\textwidth}|}
            \hline
            \centering\textbf{Compétences évaluées} & \cellcolor{red!30!white}\textbf{MI} &\cellcolor{orange!30!white} \textbf{MF} &\cellcolor{yellow!30!white} \textbf{MS} &\cellcolor{green!30!white} \textbf{TBM} \\
            \hline
            #1
        \end{tcbtab}
}
\newcommand{\tableaucompetence}[1]{
%textbf{avant} de commencer la fiche d'exercices, puis \textbf{à la fin} de la fiche d'exercices : 
       \begin{tcbtab}{|>{\raggedright\arraybackslash}p{0.68\textwidth}|*{4}{>{\centering\arraybackslash}p{0.05\textwidth}|}} 
            \hline
            \centering\textbf{Compétences travaillées} & \cellcolor{red!30!white}\textbf{MI} &\cellcolor{orange!30!white} \textbf{MF} &\cellcolor{yellow!30!white} \textbf{MS} &\cellcolor{green!30!white} \textbf{TBM} \\
            \hline
            #1
        \end{tcbtab}
}
\newcommand{\tableaurecapsequence}[1]{
%textbf{avant} de commencer la fiche d'exercices, puis \textbf{à la fin} de la fiche d'exercices : 
        \begin{tcbtab}{|>{\raggedright\arraybackslash}p{0.68\textwidth}|*{4}{>{\centering\arraybackslash}p{0.05\textwidth}|}}
            \hline
            #1
        \end{tcbtab}
}
\usetikzlibrary{trees, shapes, arrows.meta}
\usetikzlibrary{chains}
\usetikzlibrary{shapes.symbols,positioning}
\definecolor{myblue}{RGB}{79,129,189}

\tikzset{
myshape/.style={
  shape=signal,
  fill=myblue,
  draw = myblue,
  minimum height=3cm,
  minimum width=3cm,
  text=white,
  signal pointer angle=130,
  signal to=east,
  signal from=west,
  rotate=-90,
  transform shape
  },
mytext/.style={
  draw=myblue,
  text width=7cm,
  minimum height=3cm,
  thick,
  outer sep=0pt
  },  
mynewtext/.style={
  %draw=myblue,
  text width=15cm,
  minimum height=3cm,
  thick,
  outer sep=0pt,
  inner sep=0pt
  }  
}
\newcounter{tmp}
\newcommand\MyoldDesc[4][]{
\stepcounter{tmp}%
%\xdef\mycommentary{#4}
%\xdef\SequenceItemription{#3}
\node[myshape,#1] (foo\thetmp) {};
\node[font=\color{white}] at (foo\thetmp) {\begin{minipage}{2.5cm}\begin{center}#2\end{center}\end{minipage}};
\node[mytext,anchor=north west] (desc\thetmp) at (foo\thetmp.north west) 
  {%
    %\parbox[t]{2em}{\hfill$\bullet$\hfill\null}%
    \parbox[t]{\dimexpr\linewidth-2em\relax}{#3\\\Large{$1$h}}%
  };
\node[mytext,anchor=north west] (comm\thetmp) at (desc\thetmp.north east) 
  {%
    %\parbox[t]{2em}{\hfill$\bullet$\hfill\null}%
    \parbox[t]{\dimexpr\linewidth-2em\relax}{\begin{minipage}[t]{6.7cm}#4\end{minipage}}%
  };
}

\newcommand\SequenceItem[4][]{
\stepcounter{tmp}%
%\xdef\mycommentary{#4}
%\xdef\SequenceItemription{#3}
\node[myshape,#1] (foo\thetmp) {};
\node[font=\color{white}] at (foo\thetmp) {\begin{minipage}{2.5cm}\begin{center}#2\end{center}\end{minipage}};
\node[mynewtext,anchor=north west] (desc\thetmp) at (foo\thetmp.north west) 
  {%
  \tcbsidebyside[
    bicolor,
    height=3cm,
    width=15cm,
    nobeforeafter,
    bottom=2pt,
    colback=myblue!25!white,
    colbacklower=myblue!10!white,
    fonttitle=\bfseries,
    center title,
    drop lifted shadow,
    colframe=myblue,
    sharp corners=northwest,
  ]{
        #3 
   }{
        #4
    }
  };
}
\newcommand{\enteteContenu}{
\centering\textbf{Contenu de la séquence} & \cellcolor{red!30!white}\textbf{MI} &\cellcolor{orange!30!white} \textbf{MF} &\cellcolor{yellow!30!white} \textbf{MS} &\cellcolor{green!30!white} \textbf{TBM} \\
            \hline
}
\newcommand{\recapHeures}{
	\centering\textbf{Nombre d'heures} & \multicolumn{4}{c}{\thetmp \ heures}\\ 
	\hline
}
\newcommand{\competence}[1]{
   \cellcolor{gray!10}\textcolor{black}{$\bullet$} #1 & & & & \\
    \hline
}
\newcounter{exerciceBCounter}

\newcommand{\tableauPresenteEvalSixieme}[2]{
  \begin{minipage}{0.7\textwidth}\begin{tcolorbox}[colback=white, colframe=black, width=\textwidth, boxrule=2pt, arc=2pt,bottom=0pt, auto outer arc, boxsep=0pt, nobeforeafter]%0.700
    \begin{tabularx}{\textwidth}{XXX}
      \textbf{Nom :} \tcfillcrep{} &\textbf{Prénom :} \tcfillcrep{} 
    \end{tabularx}
  \end{tcolorbox}\end{minipage}  \begin{minipage}{0.295\textwidth}\hfill\begin{tcolorbox}[colback=white, colframe=black, width=\textwidth, boxrule=2pt, arc=2pt,bottom=0pt, auto outer arc, boxsep=0pt, nobeforeafter]%0.280
 \textbf{Bilan :\tccrep[seyes=false]{1cm}{}/#2\tccrep[seyes=false]{1.5cm}{}} 
  \end{tcolorbox}
	\end{minipage} \\%\vspace{-0.5cm}
}


%Commandes d'accentuation du texte 
\newcommand{\voc}[1]{\textbf{\color{\currentAccentColor}#1}\index{#1}}
\newcommand{\acc}[1]{\textbf{\color{\currentAccentColor}#1}}
\newcommand{\red}[1]{{\color{red}#1}}
\newcommand{\blue}[1]{{\color{blue}#1}}

\newcommand{\lien}[2]{\hyperref[#1]{\bfseries\color{\lienInterneColor}#2}}
\newcommand{\vocref}[2]{
    \href{#1}{\bfseries\color{monrose} #2\index{#2}}
}
\newcommand{\vocnoindexref}[2]{
    \href{#1}{\bfseries\color{monrose} #2}
}

% Commande \chrono pour dessiner un cadran avec le nombre de minutes et les tics des quarts d'heure
\newcommand{\chrono}[1]{%
    \begin{minipage}{3cm}
        \boite{Durée :}{
            %\vspace{0.35cm}
            \begin{tikzpicture}[baseline=(text.base)]
                % Dessin du cercle du cadran
                \node[draw, circle, minimum width=0.8cm, inner sep=0pt] (cadran) {};

                % Calcul de l'angle en fonction des minutes
                \pgfmathsetmacro{\chronoAngle}{90 - (#1 / 60) * 360}

                % Remplissage de l'intervalle entre 0 et le nombre de minutes
                \fill[red, opacity=0.7] (cadran.center) -- ++(90:0.4cm) arc (90:\chronoAngle:0.4cm) -- cycle;

                % Tics des quarts d'heure
                \foreach \tick in {0, 90, 180, 270} {
                    \draw[thick] ([shift=(\tick:0.33cm)]cadran.center) -- ([shift=(\tick:0.38cm)]cadran.center);
                }

                % Ajout de l'aiguille des minutes
                \draw[thick] (cadran.center) -- ++(\chronoAngle:0.38cm); % Longueur de l'aiguille proportionnelle

                % Placement du texte des minutes
                \node[anchor=west] (text) at (0.7cm,0) {#1'};
            \end{tikzpicture}%
        }
        %\vspace{0.35cm}
    \end{minipage}
}

\newcommand{\overlaychrono}[1]{
	\begin{tikzpicture}[baseline=(text.base),overlay]
                % Dessin du cercle du cadran
                \node[draw, circle, minimum width=0.8cm, inner sep=0pt] (cadran) {};

                % Calcul de l'angle en fonction des minutes
                \pgfmathsetmacro{\chronoAngle}{90 - (#1 / 60) * 360}

                % Remplissage de l'intervalle entre 0 et le nombre de minutes
                \fill[red, opacity=0.7] (cadran.center) -- ++(90:0.4cm) arc (90:\chronoAngle:0.4cm) -- cycle;

                % Tics des quarts d'heure
                \foreach \tick in {0, 90, 180, 270} {
                    \draw[thick] ([shift=(\tick:0.33cm)]cadran.center) -- ([shift=(\tick:0.38cm)]cadran.center);
                }

                % Ajout de l'aiguille des minutes
                \draw[thick] (cadran.center) -- ++(\chronoAngle:0.38cm); % Longueur de l'aiguille proportionnelle

                % Placement du texte des minutes
                \node[anchor=west] (text) at (0.7cm,0) {#1'};
      \end{tikzpicture}%
}


\stackMath
\newcommand\reallywidehat[1]{%
\savestack{\tmpbox}{\stretchto{%
  \scaleto{%
    \scalerel*[\widthof{\ensuremath{#1}}]{\kern-.6pt\bigwedge\kern-.6pt}%
    {\rule[-\textheight/2]{1ex}{\textheight}}%WIDTH-LIMITED BIG WEDGE
  }{\textheight}% 
}{0.5ex}}%
\stackon[1pt]{#1}{\tmpbox}%
}

\renewcommand{\widehat}[1]{\reallywidehat{#1}}


% Définition du style pour les éléments dans la tcolorbox avec une case à cocher
\NewDocumentCommand{\listnode}{ m m }{%
    \tcbsidebyside[sidebyside adapt=both,
    bicolor,width=3.5cm,nobeforeafter,colback=white,colbacklower=yellow!10,
    fonttitle=\bfseries,center title,drop lifted shadow,
    ]{
        #1 % Case à cocher (\cb ou \ccb)
    }{% % Petit espace après la case
        #2 % Contenu de l'élément
    }
}

%\checkbox[checked corr]{}
\newcommand{\cb}{
    \checkbox[check mark = mark14,skin = squareshadow]{}
}
\newcommand{\ccb}{
    \checkbox[check mark = mark14,skin = squareshadow,checked corr]{}
}
% Commande personnalisée \myrdexohlist avec Lua pour découper suivant "&"
\NewDocumentCommand{\myrdexohlist}{m}{
    \begin{center}\begingroup
    % Utilisation de Lua pour diviser et afficher chaque élément
    \directlua{
        local list = "\luatexluaescapestring{#1}"
        for element in string.gmatch(list, "([^&]+)") do
            tex.print(element)
        end
    }
    \endgroup
\end{center}
}


\endinput
