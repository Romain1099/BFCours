\ProvidesPackage{bfcours-entete-tableaux}[2024/06/29 v1.0 Tableaux pour bfcours]

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%Commandes pour tableau numération%%%%%%%%%%%%
%%%%%%%%%               Pas ouf, à revoir                %%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\drawComma}{%
  \begin{tikzpicture}
    \node at (0,0) {\Huge{\textbf{,}}};
  \end{tikzpicture}%
}
\newcommand{\drawCommaNo}{%
  \begin{tikzpicture}
    \node at (0,0) {\phantom{\Huge{\textbf{,}}}};
  \end{tikzpicture}%
}
\newlength{\mylength}

\providecolor{red}{RGB}{230,25,25}

\newcommandx{\cellL}[5][1=tempcolor, 2=white]{%
  \begin{tcolorbox}[enhanced,halign=flush center, valign=center,height=#5em, width=#3, boxsep=0pt, rounded corners=north, sharp corners=east, sharp corners=south, colback=#1, coltext=#2, drop shadow={color=gray!50, shadow xshift=0.5pt, shadow yshift=-0.5pt,shadow blur steps=5, shadow blur radius=0.2ex, shadow opacity=0.5}, colframe = #1]
    \centering #4%
  \end{tcolorbox}%
}
\newcommandx{\cellLR}[5][1=tempcolor, 2=white]{%
  \begin{tcolorbox}[enhanced,halign=flush center, valign=center,height=#5em, width=#3, boxsep=0pt, rounded corners=north, sharp corners=south, colback=#1, coltext=#2, drop shadow={color=gray!50, shadow xshift=0.5pt, shadow yshift=-0.5pt,shadow blur steps=5, shadow blur radius=0.2ex, shadow opacity=0.5}, colframe = #1]
    #4%
  \end{tcolorbox}%
}
\newcommandx{\cellM}[5][1=tempcolor, 2=white]{%
  \begin{tcolorbox}[enhanced,halign=flush center, valign=center,boxsep=0pt, sharp corners,height=#5em, width=#3, colback=#1, coltext=#2, drop shadow={color=gray!50, shadow xshift=0.5pt, shadow yshift=-0.5pt, shadow opacity=0.5}, colframe = #1]
    #4%
  \end{tcolorbox}%
}

\newcommandx{\cellMROTA}[5][1=tempcolor, 2=white]{%
%  \begin{tcolorbox}[enhanced, halign=center, valign=center, boxsep=0pt, sharp corners, height=#5em, width=#3, colback=#1, coltext=#2, drop shadow={color=gray!50, shadow xshift=0.5pt, shadow yshift=-0.5pt, shadow opacity=0.5}, colframe = #1, sidebyside, sidebyside align=top, lefthand width=#3]
%\newcommandx{\cellMROTA}[5][1=tempcolor, 2=white]{%
%  \begin{tcolorbox}[enhanced, halign=flush center, valign=center,boxsep=0pt, sharp corners,height=#5em, width=#3, colback=#1, coltext=#2, drop shadow={color=gray!50, shadow xshift=0.5pt, shadow yshift=-0.5pt, shadow opacity=0.5}, colframe = #1]%, halign=flush center, valign=center
    %\rotatebox{90}{#4}%
\begin{tcolorbox}[enhanced, halign=flush center, valign=center, boxsep=0pt, sharp corners, height=#5em, width=1.5#3, colback=#1, coltext=#2, drop shadow={color=gray!50, shadow xshift=0.5pt, shadow yshift=-0.5pt, shadow opacity=0.5}, colframe = #1]
%    \begin{minipage}[c][#5em][c]{#3}
%      \rotatebox{90}{\scriptsize{#4}}%
%    \end{minipage}
%          \begin{turn}{90}
#4%
%    \end{turn}
%
  \end{tcolorbox}%
}

\newcommandx{\cellR}[5][1=tempcolor, 2=white]{%
  \begin{tcolorbox}[enhanced,boxsep=0pt, rounded corners=north, sharp corners=west, sharp corners=south,height=#5em, width=#3, colback=#1, coltext=#2,  drop shadow={color=gray!50, shadow xshift=0.5pt, shadow yshift=-0.5pt,shadow blur steps=5, shadow blur radius=0.2ex, shadow opacity=0.5}, colframe = #1]
    #4%
  \end{tcolorbox}%
}
\newcommandx{\cellRep}[5][1=tempcolor, 2=white]{%
  \begin{tcolorbox}[enhanced,boxrule=1pt, boxsep=0pt, sharp corners,height=3em, width=#3, colback=gray!20, coltext=#2,  drop shadow={color=gray!50, shadow xshift=0.5pt, shadow yshift=-0.5pt,shadow blur steps=5, shadow blur radius=0.2ex, shadow opacity=0.5}, colframe = black]
    #4%
  \end{tcolorbox}%
}
\newcommand{\fusionLigne}[6]{% #1 = nombre de colonnes, #2 = texte, #3 = baseSize, #4 = tabcolsep
  \multicolumn{#1}{c}{#5{\dimexpr #1#3 + #1#4 - 1#4 +#1#4 -1#4 \relax}{#2}{#6}}
}
\newcommand{\fusionLigneDeci}[6]{% #1 = nombre de colonnes, #2 = texte, #3 = baseSize, #4 = tabcolsep
  \multicolumn{#1}{c}{#5{\dimexpr #1(#3) + #1#4 - 1#4 +#1#4 -1#4 \relax}{#2}{#6}}
}
\newtcolorbox{mybox}[1][]{
  width=\linewidth, % largeur
  height=8cm, % hauteur
  colback=red!5, % couleur de fond
  colframe=red!75!black, % couleur du cadre
  boxsep=5pt, % espace entre le texte et le cadre
  boxrule=2pt, % épaisseur du cadre
  arc=3mm, % rayon des coins arrondis
  auto outer arc, % ajuste le rayon extérieur automatiquement
  drop shadow, % ombre portée
  fonttitle=\bfseries, % police du titre
  title=#1, % titre
  halign=flush center, % alignement horizontal
  valign=center, % alignement vertical
  before=\par\bigskip\noindent, % code avant la boîte
  after=\par\bigskip, % code après la boîte
  enhanced, % boîte améliorée
  attach boxed title to top left={yshift=-2mm,xshift=3mm}, % position du titre
  boxed title style={colback=blue}, % style du titre
  interior style={}, % style intérieur
  %segmentation style={dashed}, % style de la segmentation
  colbacklower=green!10, % couleur de fond de la partie inférieure
  colupper=blue!10 % couleur de fond de la partie supérieure
}

\newcommandx{\tableauDeci}[2]{
\newcounter{loopcntr#2} 	%A été modifié ici rajout de #2 pour éviter la création multiple.
\newlength{\baseSize}
\setlength{\baseSize}{#1\columnwidth} % Définir la taille de base ici
  \setlength{\tabcolsep}{1pt}%
  \renewcommand{\arraystretch}{0.5}%
  %\begin{table}[h]%
	\begin{tabular}{*{9}{c}} %
    \fusionLigne{9}{\large{\textbf{Partie entière}}}{\baseSize}{\tabcolsep}{\cellLR}{2} \\%
    \fusionLigne{3}{\textbf{Classe des millions}}{\baseSize}{\tabcolsep}{\cellM}{5}&\fusionLigne{3}{\textbf{Classe des milliers}}{\baseSize}{\tabcolsep}{\cellM}{5}&\fusionLigne{3}{\textbf{Classe des unités}}{\baseSize}{\tabcolsep}{\cellM}{5}\\%
\fusionLigne{1}{\large{\textbf{c}}}{\baseSize}{\tabcolsep}{\cellM}{2} &\fusionLigne{1}{\large{\textbf{d}}}{\baseSize}{\tabcolsep}{\cellM}{2} &\fusionLigne{1}{\large{\textbf{u}}}{\baseSize}{\tabcolsep}{\cellM}{2} &\fusionLigne{1}{\large{\textbf{c}}}{\baseSize}{\tabcolsep}{\cellM}{2} &\fusionLigne{1}{\large{\textbf{d}}}{\baseSize}{\tabcolsep}{\cellM}{2} &\fusionLigne{1}{\large{\textbf{u}}}{\baseSize}{\tabcolsep}{\cellM}{2} &\fusionLigne{1}{\large{\textbf{c}}}{\baseSize}{\tabcolsep}{\cellM}{2} &\fusionLigne{1}{\large{\textbf{d}}}{\baseSize}{\tabcolsep}{\cellM}{2} &\fusionLigne{1}{\large{\textbf{u}}}{\baseSize}{\tabcolsep}{\cellM}{2} \\%
\fusionLigne{1}{\large{\phantom{c}}}{\baseSize}{\tabcolsep}{\cellRep}{2} &\fusionLigne{1}{\large{\phantom{c}}}{\baseSize}{\tabcolsep}{\cellRep}{2} &\fusionLigne{1}{\large{\phantom{c}}}{\baseSize}{\tabcolsep}{\cellRep}{2} &\fusionLigne{1}{\large{\phantom{c}}}{\baseSize}{\tabcolsep}{\cellRep}{2} &\fusionLigne{1}{\large{\phantom{c}}}{\baseSize}{\tabcolsep}{\cellRep}{2} &\fusionLigne{1}{\large{\phantom{c}}}{\baseSize}{\tabcolsep}{\cellRep}{2} &\fusionLigne{1}{\large{\phantom{c}}}{\baseSize}{\tabcolsep}{\cellRep}{2} &\fusionLigne{1}{\large{\phantom{c}}}{\baseSize}{\tabcolsep}{\cellRep}{2} & \fusionLigne{1}{\large{\phantom{c}}}{\baseSize}{\tabcolsep}{\cellRep}{2} \\%
\end{tabular}%
\begin{tabular}{c}%
\drawCommaNo \\%
\drawCommaNo\\%
\vspace{3.5em}\drawCommaNo  \\%
\drawComma \vspace{1em}  \\%
\drawComma \\%
\end{tabular}%
% Deuxième tableau avec 4 cellules
\begin{tabular}{*{4}{c}}%
\fusionLigne{4}{\large{\textbf{Partie décimale}}}{\baseSize}{\tabcolsep}{\cellLR}{2} \\%
    \cellMROTA[tempcolor]{\baseSize}{$\mathbf{\dfrac{1}{10}}$}{7.2} & \cellMROTA[tempcolor]{\baseSize}{$\mathbf{\dfrac{1}{100}}$}{7.2} & \cellMROTA[tempcolor]{\baseSize}{$\mathbf{\dfrac{1}{1000}}$}{7.2} & \cellMROTA[tempcolor]{\baseSize}{$\mathbf{\dfrac{1}{10\,000}}$}{7.2} \\%
\fusionLigne{1}{\large{\phantom{c}}}{\baseSize}{\tabcolsep}{\cellRep}{2} &\fusionLigne{1}{\large{\phantom{c}}}{\baseSize}{\tabcolsep}{\cellRep}{2} &\fusionLigne{1}{\large{\phantom{c}}}{\baseSize}{\tabcolsep}{\cellRep}{2} &\fusionLigne{1}{\large{\phantom{c}}}{\baseSize}{\tabcolsep}{\cellRep}{2} \\%
\end{tabular}%
%\end{table}
}
%\newsavebox{\mytableau}
%\begin{lrbox}{\mytableau}
%  \begin{minipage}{\textwidth}
%    \tableauDeci{1}{3}
%  \end{minipage}
%\end{lrbox}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%% Commandes Tableaux stylés %%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%style tcolorbox pour les tableaux : 
\tcbset{
    TableauBox/.style={%
colframe=\currentTableFrameColor,colback=\currentTableColbackColor,colupper=\currentTableColupperColor,
colbacktitle=\currentTableColbackTitleColor, coltitle=\currentTableColTitleColor,
breakable,
%before upper = {\arrayrulecolor{blue!50!black}\renewcommand{\arraystretch}{1.2}},
% before upper*=\begin{tabular}{cc},
% after upper*=\end{tabular},
 fonttitle=\bfseries,nobeforeafter,center title,left=0mm,right=0mm,top=0mm,bottom=0mm,boxsep=0mm,
    toptitle=0.5mm,bottomtitle=0.5mm,}
}
\tcbset{
    CompTab/.style={%
colframe=\currentTableFrameColor,colback=\currentTableColbackColor,colupper=\currentTableColupperColor,
colbacktitle=\currentTableColbackTitleColor, coltitle=\currentTableColTitleColor,
before upper = {\arrayrulecolor{blue!50!black}\renewcommand{\arraystretch}{0.2}},
% before upper*=\begin{tabular}{cc},
% after upper*=\end{tabular},
 fonttitle=\bfseries,nobeforeafter,left=0pt,right=0pt,top=0pt,bottom=0pt,boxsep=0pt,
    toptitle=0.5mm,bottomtitle=0.5mm,}
}
%%Second style tableaux en tabularx
\newtcolorbox{tcbtabx}[3][]{%
    enhanced,
    fonttitle=\bfseries\large,
    fontupper=\normalsize,
    colback=\currentSecondaryTableColbackColor,
    colframe=\currentSecondaryTableFrameColor,
    colbacktitle=\currentSecondaryTableColbackTitleColor,
    coltitle=\currentSecondaryTableColTitleColor,
    drop fuzzy shadow,
    width=#3,
    center title,
    title=#1,
    tabularx*={\arrayrulewidth0.5mm\renewcommand\arraystretch{1.4}}%
        {#2} % Structure du tableau passée en paramètre
}
%Exemple : 
%\begin{tcbtab}{|*{14}{c|}}%[Carrés parfaits à connaître]{|*{14}{c|}}%{0.8\textwidth}
%    nombre $a$&0&1&2&3&4&5&6&7&8&9&10&11&12\\
%    \hline
%    $a$ \frquote{au carré}&0&1&4&9&16&25&36&49&64&81&100&121&144\\
%    \hline
%\end{tcbtab}

%Tableaux classique en tabular
\newtcolorbox{tcbtab}[2][]{%
    TableauBox,
    drop fuzzy shadow,%
    %width=#3,
    center title,
    title=#1,
    hbox,
    %tabulars*={\renewcommand\arraystretch{1.2}}%
    before upper*=\begin{tabular}{#2},
    after upper*=\end{tabular} % Structure du tableau passée en paramètre
}
%Tableaux classique en tabular
\newtcolorbox{tcbtabcomp}[2][]{%
    CompTab,
    drop fuzzy shadow,%
    %width=#3,
    center title,
    title=#1,
    hbox,
    %tabulars*={\renewcommand\arraystretch{1.2}}%
    before upper*=\begin{tabular}{#2},
    after upper*=\end{tabular} % Structure du tableau passée en paramètre
}
\endinput